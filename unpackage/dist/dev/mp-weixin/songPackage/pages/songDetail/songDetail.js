(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["songPackage/pages/songDetail/songDetail"],{210:
/*!******************************************************************************************************************!*\
  !*** D:/Uni-App/Uni-App/yunyinyue/songPackage/pages/songDetail/songDetail.vue?vue&type=style&index=0&lang=less& ***!
  \******************************************************************************************************************/
/*! no static exports found */function(n,t,e){"use strict";e.r(t);var i=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--10-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./songDetail.vue?vue&type=style&index=0&lang=less& */211),r=e.n(i);for(var a in i)"default"!==a&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=r.a},211:
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Uni-App/Uni-App/yunyinyue/songPackage/pages/songDetail/songDetail.vue?vue&type=style&index=0&lang=less& ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(n,t,e){},67:
/*!*****************************************************************************************************!*\
  !*** D:/Uni-App/Uni-App/yunyinyue/main.js?{"page":"songPackage%2Fpages%2FsongDetail%2FsongDetail"} ***!
  \*****************************************************************************************************/
/*! no static exports found */function(n,t,e){"use strict";(function(n){e(/*! uni-pages */4);i(e(/*! vue */2));var t=i(e(/*! ./songPackage/pages/songDetail/songDetail.vue */68));function i(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},68:
/*!********************************************************************************!*\
  !*** D:/Uni-App/Uni-App/yunyinyue/songPackage/pages/songDetail/songDetail.vue ***!
  \********************************************************************************/
/*! no static exports found */function(n,t,e){"use strict";e.r(t);var i=e(/*! ./songDetail.vue?vue&type=template&id=65dc93e8& */69),r=e(/*! ./songDetail.vue?vue&type=script&lang=js& */71);for(var a in r)"default"!==a&&function(n){e.d(t,n,(function(){return r[n]}))}(a);e(/*! ./songDetail.vue?vue&type=style&index=0&lang=less& */210);var u,o=e(/*! ../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),c=Object(o["default"])(r["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],u);c.options.__file="songPackage/pages/songDetail/songDetail.vue",t["default"]=c.exports},69:
/*!***************************************************************************************************************!*\
  !*** D:/Uni-App/Uni-App/yunyinyue/songPackage/pages/songDetail/songDetail.vue?vue&type=template&id=65dc93e8& ***!
  \***************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(n,t,e){"use strict";e.r(t);var i=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./songDetail.vue?vue&type=template&id=65dc93e8& */70);e.d(t,"render",(function(){return i["render"]})),e.d(t,"staticRenderFns",(function(){return i["staticRenderFns"]})),e.d(t,"recyclableRender",(function(){return i["recyclableRender"]})),e.d(t,"components",(function(){return i["components"]}))},70:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Uni-App/Uni-App/yunyinyue/songPackage/pages/songDetail/songDetail.vue?vue&type=template&id=65dc93e8& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(n,t,e){"use strict";var i;e.r(t),e.d(t,"render",(function(){return r})),e.d(t,"staticRenderFns",(function(){return u})),e.d(t,"recyclableRender",(function(){return a})),e.d(t,"components",(function(){return i}));var r=function(){var n=this,t=n.$createElement;n._self._c},a=!1,u=[];r._withStripped=!0},71:
/*!*********************************************************************************************************!*\
  !*** D:/Uni-App/Uni-App/yunyinyue/songPackage/pages/songDetail/songDetail.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************/
/*! no static exports found */function(n,t,e){"use strict";e.r(t);var i=e(/*! -!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./songDetail.vue?vue&type=script&lang=js& */72),r=e.n(i);for(var a in i)"default"!==a&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=r.a},72:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Uni-App/Uni-App/yunyinyue/songPackage/pages/songDetail/songDetail.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(e(/*! ./node_modules/@babel/runtime/regenerator */17)),r=o(e(/*! ../../../untils/request.js */20)),a=o(e(/*! pubsub-js */63)),u=o(e(/*! moment */73));function o(n){return n&&n.__esModule?n:{default:n}}function c(n,t,e,i,r,a,u){try{var o=n[a](u),c=o.value}catch(s){return void e(s)}o.done?t(c):Promise.resolve(c).then(i,r)}function s(n){return function(){var t=this,e=arguments;return new Promise((function(i,r){var a=n.apply(t,e);function u(n){c(a,i,r,u,o,"next",n)}function o(n){c(a,i,r,u,o,"throw",n)}u(void 0)}))}}var d=getApp(),l={data:function(){return{isPlay:!1,song:{},musicId:"",musicLink:"",currentTime:"00:00",durationTime:"00:00",currentWidth:0}},methods:{handleMusicPlay:function(){this.isPlay=!this.isPlay,d.globalData.isMUsicPlay=this.isPlay,this.musicControl(this.isPlay,this.musicLink)},musicControl:function(){var n=arguments,t=this;return s(i.default.mark((function e(){var a,u,o;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.length>0&&void 0!==n[0]?n[0]:t.isPlay,u=n.length>1?n[1]:void 0,!a){e.next=12;break}if(u){e.next=8;break}return e.next=6,(0,r.default)("/song/url",{id:t.musicId});case 6:o=e.sent,t.musicLink=o.data[0].url;case 8:t.backgroundAudioManager.src=t.musicLink,t.backgroundAudioManager.title=t.song.name,e.next=13;break;case 12:t.backgroundAudioManager.pause();case 13:case"end":return e.stop()}}),e)})))()},getMusicInfo:function(t){var e=this;return s(i.default.mark((function a(){var o;return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.musicId=t,i.next=3,(0,r.default)("/song/detail",{ids:t});case 3:o=i.sent,e.song=o.songs[0],e.durationTime=(0,u.default)(e.song.dt).format("mm:ss"),n.setNavigationBarTitle({title:e.song.name});case 7:case"end":return i.stop()}}),a)})))()},handleSwitch:function(n){var t=this,e=n.currentTarget.id;this.backgroundAudioManager.stop(),a.default.subscribe("musicId",(function(n,e){t.getMusicInfo(e),t.musicControl(!0),a.default.unsubscribe("musicId")})),a.default.publish("switchType",e)}},onLoad:function(t){var e=this,i=t.musicId;this.getMusicInfo(i),this.backgroundAudioManager=n.getBackgroundAudioManager(),d.globalData.isMUsicPlay&&d.globalData.musicId===this.musicId&&(this.isPlay=!0),this.backgroundAudioManager.onPlay((function(){e.isPlay=!0,d.globalData.musicId=e.musicId})),this.backgroundAudioManager.onPause((function(){e.isPlay=!1})),this.backgroundAudioManager.onStop((function(){e.isPlay=!1})),this.backgroundAudioManager.onTimeUpdate((function(){e.currentTime=(0,u.default)(1e3*e.backgroundAudioManager.currentTime).format("mm:ss"),e.currentWidth=e.backgroundAudioManager.currentTime/e.backgroundAudioManager.duration*400})),this.backgroundAudioManager.onEnded((function(){e.handleSwitch({currentTarget:{id:"next"}}),e.currentWidth=0,e.currentTime="00:00"}))}};t.default=l}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])}},[[67,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/songPackage/pages/songDetail/songDetail.js.map